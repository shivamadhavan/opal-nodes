require=function e(r,t,n){function i(s,a){if(!t[s]){if(!r[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[s]={exports:{}};r[s][0].call(l.exports,function(e){var t=r[s][1][e];return i(t||e)},l,l.exports,e,r,t,n)}return t[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,r,t){"use strict";var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();!function(){function e(r){var t=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r+".js";n+=Runtime.queryParamsString(),this._workerPromise=new Promise(function(e){t._worker=new Worker(n),t._worker.onmessage=function(r){console.assert("workerReady"===r.data),this._worker.onmessage=null,e(this._worker),this._worker=null}.bind(t)})}n(e,[{key:"postMessage",value:function(e){var r=this;this._workerPromise.then(function(t){r._disposed||t.postMessage(e)})}},{key:"dispose",value:function(){this._disposed=!0,this._workerPromise.then(function(e){return e.terminate()})}},{key:"terminate",value:function(){this.dispose()}},{key:"onmessage",set:function(e){this._workerPromise.then(function(r){return r.onmessage=e})}},{key:"onerror",set:function(e){this._workerPromise.then(function(r){return r.onerror=e})}}])}()},{}],ServiceManager:[function(e,r,t){"use strict";var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var o=e("./Worker"),s={},a="localhost",c="9010",u=function(){function e(){i(this,e)}return n(e,null,[{key:"queryParam",value:function(e){switch(e){case"service-backend":return"ws://__host__:__port__/svc".replace(/__host__/g,a).replace(/__port__/g,c)}}}]),e}();s.ServiceManager=function(){function e(){i(this,e)}return n(e,[{key:"setEndpoint",value:function(e,r){return a=e||a,c=r||c,this}},{key:"createRemoteService",value:function(e){if(!this._remoteConnection){var r=u.queryParam("service-backend");if(!r)return console.error("No endpoint address specified"),Promise.resolve(null);this._remoteConnection=new s.ServiceManager.Connection(new s.ServiceManager.RemoteServicePort(r))}return this._remoteConnection._createService(e)}},{key:"createAppService",value:function(e,r){var t=e+".js",n=u.queryParam("remoteBase"),i=u.queryParam("debugFrontend"),a=Host.isUnderTest(),c=[];n&&c.push("remoteBase="+n),i&&c.push("debugFrontend="+i),a&&c.push("isUnderTest=true"),c.length&&(t+="?"+c.join("&"));var l=new o(t);return new s.ServiceManager.Connection(new s.ServiceManager.WorkerServicePort(l))._createService(r)}}]),e}(),s.ServiceManager.Connection=function(){function e(r){i(this,e),this._port=r,this._port.setHandlers(this._onMessage.bind(this),this._connectionClosed.bind(this)),this._lastId=1,this._callbacks=new Map,this._services=new Map}return n(e,[{key:"_createService",value:function(e){var r=this;return this._sendCommand(e+".create").then(function(t){if(!t)return console.error("Could not initialize service: "+e),null;var n=new s.ServiceManager.Service(r,e,t.id);return r._services.set(e+":"+t.id,n),n})}},{key:"_serviceDisposed",value:function(e){this._services.delete(e._serviceName+":"+e._objectId),this._services.size||this._port.close()}},{key:"_sendCommand",value:function(e,r){var t=this,n=this._lastId++,i=JSON.stringify({id:n,method:e,params:r||{}});return this._port.send(i).then(function(e){return e?new Promise(function(e){return t._callbacks.set(n,e)}):Promise.resolve(null)})}},{key:"_onMessage",value:function(e){var r=void 0;try{console.log("Data: %s",e),r=JSON.parse(e)}catch(e){return void console.error(e)}if(r.id)return r.error&&console.error("Service error: "+r.error),this._callbacks.get(r.id)(r.error?r:r.result),void this._callbacks.delete(r.id);var t=r.method.split("."),n=t[0],i=t[1],o=this._services.get(n+":"+r.params.id);o?o._dispatchNotification(i,r.params):console.error("Unable to lookup stub for "+n+":"+r.params.id)}},{key:"_connectionClosed",value:function(){var e=!0,r=!1,t=void 0;try{for(var n,i=this._callbacks.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){(0,n.value)(null)}}catch(e){r=!0,t=e}finally{try{!e&&i.return&&i.return()}finally{if(r)throw t}}this._callbacks.clear();var o=!0,s=!1,a=void 0;try{for(var c,u=this._services.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){c.value._dispatchNotification("disposed")}}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}this._services.clear()}}]),e}(),s.ServiceManager.Service=function(){function e(r,t,n){i(this,e),this._connection=r,this._serviceName=t,this._objectId=n,this._notificationHandlers=new Map}return n(e,[{key:"dispose",value:function(){var e=this,r={id:this._objectId};return this._connection._sendCommand(this._serviceName+".dispose",r).then(function(){e._connection._serviceDisposed(e)})}},{key:"on",value:function(e,r){this._notificationHandlers.set(e,r)}},{key:"send",value:function(e,r){return(r=r||{}).id=this._objectId,this._connection._sendCommand(this._serviceName+"."+e,r)}},{key:"_dispatchNotification",value:function(e,r){var t=this._notificationHandlers.get(e);t?t(r):console.error("Could not report notification '"+e+"' on '"+this._objectId+"'")}}]),e}(),s.ServiceManager.RemoteServicePort=function(){function e(r){i(this,e),this._url=r}return n(e,[{key:"setHandlers",value:function(e,r){this._messageHandler=e,this._closeHandler=r}},{key:"_open",value:function(){return this._connectionPromise||(this._connectionPromise=new Promise(function(e){var r=void 0;try{(r=new WebSocket(this._url)).onmessage=function(e){this._messageHandler(e.data)}.bind(this),r.onclose=function(){this._socket||e(!1);this._socketClosed(!!this._socket)}.bind(this),r.onopen=function(){this._socket=r,e(!0)}.bind(this)}catch(r){e(!1)}}.bind(this))),this._connectionPromise}},{key:"send",value:function(e){var r=this;return this._open().then(function(){return!!r._socket&&(r._socket.send(e),!0)})}},{key:"close",value:function(){var e=this;return this._open().then(function(){return e._socket&&(e._socket.close(),e._socketClosed(!0)),!0})}},{key:"_socketClosed",value:function(e){this._socket=null,delete this._connectionPromise,e&&this._closeHandler()}}]),e}(),s.ServiceManager.WorkerServicePort=function(){function e(r){i(this,e),this._worker=r;var t=void 0;this._workerPromise=new Promise(function(e){return t=e}),this._worker.onmessage=function(e){if("workerReady"===e.data)return void t(!0);this._messageHandler(e.data)}.bind(this),this._worker.onclose=this._closeHandler}return n(e,[{key:"setHandlers",value:function(e,r){this._messageHandler=e,this._closeHandler=r}},{key:"send",value:function(e){var r=this;return this._workerPromise.then(function(){try{return r._worker.postMessage(e),!0}catch(e){return!1}})}},{key:"close",value:function(){var e=this;return this._workerPromise.then(function(){return e._worker&&e._worker.terminate(),!1})}}]),e}(),s.serviceManager=new s.ServiceManager,r.exports=s},{"./Worker":1}],WebNodeUtils:[function(e,r,t){"use strict";var n=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(t.push(s.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var o=Symbol(),s=Symbol(),a=function(){function e(r){if(function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),r!==s)throw new Error("Cannot construct singleton WebNodeUtils, use WebNodeUtils.instance()");this._type="WebNodeUtils"}return i(e,[{key:"isValidUrl",value:function(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:266|267)(?:\.\d{1,3}){3})(?!(?:266\.254|292\.168)(?:\.\d{1,3}){2})(?!172\.(?:2[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)}},{key:"isUrlSafePart",value:function(e){return!0}},{key:"getUrlParts",value:function(e){var r=e.split(/[?#]/),t=n(r,3);return{path:t[0],query:t[1],anchor:t[2]}}}],[{key:"instance",get:function(){return this[o]||(this[o]=new e(s)),this[o]}}]),e}();r.exports=a},{}],"fast-deep-equal":[function(e,r,t){"use strict";r.exports=function e(r,t){if(r===t)return!0;var n,i=Array.isArray(r),o=Array.isArray(t);if(i&&o){if(r.length!=t.length)return!1;for(n=0;n<r.length;n++)if(!e(r[n],t[n]))return!1;return!0}if(i!=o)return!1;if(r&&t&&"object"==typeof r&&"object"==typeof t){var s=Object.keys(r);if(s.length!==Object.keys(t).length)return!1;var a=r instanceof Date,c=t instanceof Date;if(a&&c)return r.getTime()==t.getTime();if(a!=c)return!1;var u=r instanceof RegExp,l=t instanceof RegExp;if(u&&l)return r.toString()==t.toString();if(u!=l)return!1;for(n=0;n<s.length;n++)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;for(n=0;n<s.length;n++)if(!e(r[s[n]],t[s[n]]))return!1;return!0}return!1}},{}]},{},[]);
//# sourceMappingURL=app.js.map
